<!DOCTYPE html>
<!-- saved from url=(0058)http://code.google.com/p/json-simple/wiki/DecodingExamples -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <link rel="icon" type="image/vnd.microsoft.icon" href="http://www.gstatic.com/codesite/ph/images/phosting.ico">
 
 <script type="text/javascript">
 
 
 
 var codesite_token = "1c01edb64c403b5a47deb3ec33daa2c1";
 
 
 var logged_in_user_email = "zonademanel@gmail.com";
 
 
 var relative_base_url = "";
 
 </script>
 
 
 <title>DecodingExamples - 
 json-simple -
 
 Examples of JSON decoding - Project Hosting on Google Code</title>
 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link type="text/css" rel="stylesheet" href="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/ph_core.css">
 
 <link type="text/css" rel="stylesheet" href="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="http://code.google.com/feeds/p/json-simple/svnchanges/basic?path=/wiki/DecodingExamples.wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="http://www.gstatic.com/codesite/ph/6191598954148986782/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 
 
 </style>
<script type="text/javascript" async="" src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/ga.js"></script><meta name="chromesniffer" id="chromesniffer_meta" content="Google%20Analytics=1&amp;"><script type="text/javascript" src="chrome-extension://homgcnaoacgigpkkljjjekpignblkeae/detector.js"></script></head>
<body class="t6">
 <script type="text/javascript">
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-6879815-2'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 </script>
<div class="headbg">
 <div id="gaia">
 
 <span>
 
 
 <b>zonademanel@gmail.com</b>
 
 
 | <a href="http://code.google.com/u/zonademanel/" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>▼</small></a>
 | <a href="http://code.google.com/u/zonademanel/" onclick="_CS_click(&#39;/gb/ph/profile&#39;);" title="Profile, Updates, and Settings"><u>Profile</u></a>
 | <a href="https://www.google.com/accounts/Logout?continue=http%3A%2F%2Fcode.google.com%2Fp%2Fjson-simple%2Fwiki%2FDecodingExamples" onclick="_CS_click(&#39;/gb/ph/signout&#39;);"><u>Sign out</u></a>
 
 </span>

 </div>
 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->




 <table style="padding:0px; margin: 0px 0px 10px 0px; width:100%" cellpadding="0" cellspacing="0">
 <tbody><tr style="height: 58px;">
 
 <td id="plogo">
 <a href="http://code.google.com/p/json-simple/">
 
 <img src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/defaultlogo.png" alt="Logo">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em">
 
 <div id="pname">
 <a href="http://code.google.com/p/json-simple/">json-simple</a>
 </div>
 <div id="psum">
 <a id="project_summary_link" href="http://code.google.com/p/json-simple/">JSON.simple - A simple Java toolkit for JSON</a>
 
 </div>
 
 </td>
 <td style="white-space:nowrap;text-align:right; vertical-align:bottom;">
 
 <form action="http://code.google.com/hosting/search">
 <input size="30" name="q" value="" type="text">
 <input type="submit" name="projectsearch" value="Search projects">
 </form>
 
 </td></tr>
 </tbody></table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="http://code.google.com/p/json-simple/" class="tab ">Project&nbsp;Home</a> 
 
 
 
 
 <a href="http://code.google.com/p/json-simple/downloads/list" class="tab ">Downloads</a>
 
 
 
 
 
 <a href="http://code.google.com/p/json-simple/w/list" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="http://code.google.com/p/json-simple/issues/list" class="tab ">Issues</a>
 
 
 
 
 
 <a href="http://code.google.com/p/json-simple/source/checkout" class="tab ">Source</a>
 
 
 
 <div class="gtbc"></div>
</div>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
 <tbody><tr>
 
 
 
 <td class="subt">
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="http://code.google.com/p/json-simple/w/list" method="GET" style="display:inline">
 <select id="can" name="can" style="font-size:92%">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="5">&nbsp;My starred pages</option>
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input type="text" size="38" id="searchq" name="q" value="" autocomplete="off" style="font-size:92%"></span>
 
 
 <input type="submit" value="Search" style="font-size:92%">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td align="right" valign="top" class="bevel-right"></td>
 </tr>
</tbody></table>
<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>


<div id="maincol">

 
<!-- IE -->







 <style type="text/css">
 .artifactcomment {
 margin: .5em 0 0 0;
 padding: .3em 0 .3em .3em;
 border-top: 3px solid #c3d9ff;
 }
 #commentlist {
 border-bottom: 3px solid #c3d9ff;
 }
 #commentform { padding-top: 1em; }
 .delcom { background: #e8e8e8 }
 .commentcontent { margin: 1em 0;}
 </style>


 <div id="wikicontent">
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
 <tbody><tr>
 
 <td class="vt" id="wikimaincol" width="100%">
 
 <div style="float:right; width:18em" id="wikimeta">
 <div class="pmeta_bubble_bg">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <table style="padding: 5px">
 <tbody><tr><td colspan="2" style="padding-bottom:5px">Updated <span title="Thu Feb  4 12:14:51 2010">Feb 04, 2010</span>
 
 by <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>
 </td></tr>
 
 
 </tbody></table>
 </div>
 <div class="round1"></div>
 <div class="round2"></div>
 <div class="round4"></div>
 </div>
 </div>
 
 <div id="wikiheader" style="margin-bottom:1em">
 
 <img width="15" height="15" id="star_img" src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/star_off.gif" style="cursor:pointer" onclick="_CS_toggleStar(this,
 &#39;&#39;,
 {&#39;scope&#39;: &#39;wiki&#39;,
 &#39;user&#39;: &#39;_CURRENT_USER&#39;,
 &#39;item&#39;: &#39;json-simple:DecodingExamples&#39;,
 &#39;token&#39;: codesite_token
 });">
 
 &nbsp;
 <span style="font-size:120%;font-weight:bold">DecodingExamples</span>
 &nbsp;
 
 
 <div style="font-style:italic; margin-top: 3px">Examples of JSON decoding</div>
 
 </div>
 <p></p><ul><ul><ul><ul><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_1_-_Convenient_way:_Use_JSONValue">Example 1 - Convenient way: Use JSONValue</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_2_-_Faster_way:_Reuse_instance_of_JSONParser">Example 2 - Faster way: Reuse instance of JSONParser</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_3_-_Exception_handling">Example 3 - Exception handling</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_4_-_Container_factory">Example 4 - Container factory</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_5_-_Stoppable_SAX-like_content_handler">Example 5 - Stoppable SAX-like content handler</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_6_-_Build_whole_object_graph_on_top_of_SAX-like_content">Example 6 - Build whole object graph on top of SAX-like content handler</a></li><li><a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Notes_-_Multithreading_and_extensions">Notes - Multithreading and extensions</a></li></ul></ul></ul></ul> <p></p><h4><a name="Example_1_-_Convenient_way:_Use_JSONValue"></a>Example 1 - Convenient way: Use JSONValue<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_1_-_Convenient_way:_Use_JSONValue" class="section_anchor">¶</a></h4><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"=======decode======="</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="typ">String</span><span class="pln"> s</span><span class="pun">=</span><span class="str">"[0,{\"1\":{\"2\":{\"3\":{\"4\":[5,{\"6\":7}]}}}}]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">Object</span><span class="pln"> obj</span><span class="pun">=</span><span class="typ">JSONValue</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">JSONArray</span><span class="pln"> array</span><span class="pun">=(</span><span class="typ">JSONArray</span><span class="pun">)</span><span class="pln">obj</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"======the 2nd element of array======"</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">array</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">));</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="typ">JSONObject</span><span class="pln"> obj2</span><span class="pun">=(</span><span class="typ">JSONObject</span><span class="pun">)</span><span class="pln">array</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"======field \"1\"=========="</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj2</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">));</span><span class="pln"> &nbsp; &nbsp;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"{}"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="typ">JSONValue</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"[5,]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="typ">JSONValue</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"[5,,2]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="typ">JSONValue</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span></pre><p>JSONObject is a java.util.Map and JSONArray is a java.util.List, so you can access them </p><blockquote>with standard operations of Map or List. Please refer <a href="http://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities">Mapping Between JSON and Java Entities</a> for more information on entity mapping while parsing. 
</blockquote><p></p><h4><a name="Example_2_-_Faster_way:_Reuse_instance_of_JSONParser"></a>Example 2 - Faster way: Reuse instance of JSONParser<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_2_-_Faster_way:_Reuse_instance_of_JSONParser" class="section_anchor">¶</a></h4><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"=======decode======="</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="typ">String</span><span class="pln"> s</span><span class="pun">=</span><span class="str">"[0,{\"1\":{\"2\":{\"3\":{\"4\":[5,{\"6\":7}]}}}}]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">Object</span><span class="pln"> obj</span><span class="pun">=</span><span class="pln">parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">JSONArray</span><span class="pln"> array</span><span class="pun">=(</span><span class="typ">JSONArray</span><span class="pun">)</span><span class="pln">obj</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"======the 2nd element of array======"</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">array</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">));</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="typ">JSONObject</span><span class="pln"> obj2</span><span class="pun">=(</span><span class="typ">JSONObject</span><span class="pun">)</span><span class="pln">array</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"======field \"1\"=========="</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj2</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">));</span><span class="pln"> &nbsp; &nbsp;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"{}"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="pln">parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"[5,]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="pln">parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; s</span><span class="pun">=</span><span class="str">"[5,,2]"</span><span class="pun">;</span><span class="pln"><br>&nbsp; obj</span><span class="pun">=</span><span class="pln">parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span></pre><p>JSONObject is a java.util.Map and JSONArray is a java.util.List, so you can access them  with standard operations of Map or List. Please refer <a href="http://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities">Mapping Between JSON and Java Entities</a> for more information on entity mapping while parsing. </p><h4><a name="Example_3_-_Exception_handling"></a>Example 3 - Exception handling<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_3_-_Exception_handling" class="section_anchor">¶</a></h4><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="typ">String</span><span class="pln"> jsonText </span><span class="pun">=</span><span class="pln"> </span><span class="str">"[[null, 123.45, \"a\\tb c\"]}, true"</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">try</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonText</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; </span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">ParseException</span><span class="pln"> pe</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"position: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> pe</span><span class="pun">.</span><span class="pln">getPosition</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">pe</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span></pre><p>Result: </p><pre class="prettyprint"><span class="pln">&nbsp; position</span><span class="pun">:</span><span class="pln"> </span><span class="lit">25</span><span class="pln"><br>&nbsp; </span><span class="typ">Unexpected</span><span class="pln"> token RIGHT BRACE</span><span class="pun">(})</span><span class="pln"> at position </span><span class="lit">25.</span></pre><p>Please refer <a href="http://code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/ParseException.java" rel="nofollow">ParseException.java</a> for more information.  </p><h4><a name="Example_4_-_Container_factory"></a>Example 4 - Container factory<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_4_-_Container_factory" class="section_anchor">¶</a></h4><p>You can use <a href="http://code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/ContainerFactory.java" rel="nofollow">ContainerFactory</a> to create containers for parsed JSON objects and JSON arrays: </p><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="typ">String</span><span class="pln"> jsonText </span><span class="pun">=</span><span class="pln"> </span><span class="str">"{\"first\": 123, \"second\": [4, 5, 6], \"third\": 789}"</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br>&nbsp; </span><span class="typ">ContainerFactory</span><span class="pln"> containerFactory </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ContainerFactory</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pln"> creatArrayContainer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> createObjectContainer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedHashMap</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="pun">};</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">try</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Map</span><span class="pln"> json </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Map</span><span class="pun">)</span><span class="pln">parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonText</span><span class="pun">,</span><span class="pln"> containerFactory</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Iterator</span><span class="pln"> iter </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">entrySet</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"==iterate result=="</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">iter</span><span class="pun">.</span><span class="pln">hasNext</span><span class="pun">()){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="typ">Map</span><span class="pun">.</span><span class="typ">Entry</span><span class="pln"> entry </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Map</span><span class="pun">.</span><span class="typ">Entry</span><span class="pun">)</span><span class="pln">iter</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">entry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"=&gt;"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"==toJSONString()=="</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="typ">JSONValue</span><span class="pun">.</span><span class="pln">toJSONString</span><span class="pun">(</span><span class="pln">json</span><span class="pun">));</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; </span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">ParseException</span><span class="pln"> pe</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">pe</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span></pre><p>Result: </p><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="pun">==</span><span class="pln">iterate result</span><span class="pun">==</span><span class="pln"><br>&nbsp; first</span><span class="pun">=&gt;</span><span class="lit">123</span><span class="pln"><br>&nbsp; second</span><span class="pun">=&gt;[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln"><br>&nbsp; third</span><span class="pun">=&gt;</span><span class="lit">789</span><span class="pln"><br>&nbsp; </span><span class="pun">==</span><span class="pln">toJSONString</span><span class="pun">()==</span><span class="pln"><br>&nbsp; </span><span class="pun">{</span><span class="str">"first"</span><span class="pun">:</span><span class="lit">123</span><span class="pun">,</span><span class="str">"second"</span><span class="pun">:[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">],</span><span class="str">"third"</span><span class="pun">:</span><span class="lit">789</span><span class="pun">}</span></pre><p>If you don't specify a container factory, org.json.simple.JSONObject is used for a Map and org.json.simple.JSONArray is used for a List. Please refer <a href="http://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities">Mapping Between JSON and Java Entities</a> for more information on entity mapping while parsing. </p><h4><a name="Example_5_-_Stoppable_SAX-like_content_handler"></a>Example 5 - Stoppable SAX-like content handler<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_5_-_Stoppable_SAX-like_content_handler" class="section_anchor">¶</a></h4><p>JSON.simple introduces a simplified and stoppable SAX-like content handler to process JSON text stream. The user can pause at any point of the logical input stream, processing other logic, then resume parsing if needed, or abort parsing if he gets the desired result, without having to wait for the whole input stream to finish. Then we have a very fast parser without sacrificing the flexibility. Here's an example of finding values of any object entry that matches a desired key: </p><p>KeyFinder.java: </p><pre class="prettyprint"><span class="kwd">class</span><span class="pln"> </span><span class="typ">KeyFinder</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ContentHandler</span><span class="pun">{</span><span class="pln"><br>&nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> found </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> key</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> matchKey</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setMatchKey</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> matchKey</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">matchKey </span><span class="pun">=</span><span class="pln"> matchKey</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> getValue</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> value</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isEnd</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setFound</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> found</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">found </span><span class="pun">=</span><span class="pln"> found</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isFound</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> found</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> startJSON</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; found </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> endJSON</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> primitive</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">key </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">key</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">matchKey</span><span class="pun">)){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; found </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> value</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; key </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startArray</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startObject</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startObjectEntry</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">key </span><span class="pun">=</span><span class="pln"> key</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endArray</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endObject</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endObjectEntry</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></pre><p>Main logic: </p><pre class="prettyprint"><span class="pln">&nbsp; </span><span class="typ">String</span><span class="pln"> jsonText </span><span class="pun">=</span><span class="pln"> </span><span class="str">"{\"first\": 123, \"second\": [{\"k1\":{\"id\":\"id1\"}}, 4, 5, 6, {\"id\": 123}], \"third\": 789, \"id\": null}"</span><span class="pun">;</span><span class="pln"><br>&nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br>&nbsp; </span><span class="typ">KeyFinder</span><span class="pln"> finder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeyFinder</span><span class="pun">();</span><span class="pln"><br>&nbsp; finder</span><span class="pun">.</span><span class="pln">setMatchKey</span><span class="pun">(</span><span class="str">"id"</span><span class="pun">);</span><span class="pln"><br>&nbsp; </span><span class="kwd">try</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(!</span><span class="pln">finder</span><span class="pun">.</span><span class="pln">isEnd</span><span class="pun">()){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonText</span><span class="pun">,</span><span class="pln"> finder</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">finder</span><span class="pun">.</span><span class="pln">isFound</span><span class="pun">()){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; finder</span><span class="pun">.</span><span class="pln">setFound</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"found id:"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">finder</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; </span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">ParseException</span><span class="pln"> pe</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; pe</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln"><br>&nbsp; </span><span class="pun">}</span></pre><p>Result: </p><pre class="prettyprint"><span class="pln">&nbsp; found id</span><span class="pun">:</span><span class="pln"><br>&nbsp; id1<br>&nbsp; found id</span><span class="pun">:</span><span class="pln"><br>&nbsp; </span><span class="lit">123</span><span class="pln"><br>&nbsp; found id</span><span class="pun">:</span><span class="pln"><br>&nbsp; </span><span class="kwd">null</span></pre><p>Please refer <a href="http://code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/ContentHandler.java" rel="nofollow">ContentHandler.java</a> for more information. </p><h4><a name="Example_6_-_Build_whole_object_graph_on_top_of_SAX-like_content"></a>Example 6 - Build whole object graph on top of SAX-like content handler<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_6_-_Build_whole_object_graph_on_top_of_SAX-like_content" class="section_anchor">¶</a></h4><p>Please note that JSON.simple has provided the build in functionality to do the same work. Please refer above examples for more information. Here is just an example to show how to use the SAX-like interface in a slightly more complex scenario. </p><p>  Transformer.java: </p><pre class="prettyprint"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Transformer</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ContentHandler</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Stack</span><span class="pln"> valueStack</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> getResult</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">valueStack </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">peek</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endArray </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; trackBack</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> endJSON </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endObject </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; trackBack</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> endObjectEntry </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Map</span><span class="pln"> parent </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Map</span><span class="pun">)</span><span class="pln">valueStack</span><span class="pun">.</span><span class="pln">peek</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> trackBack</span><span class="pun">(){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">valueStack</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">peek</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">prev </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">String</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> consumeValue</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">valueStack</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> valueStack</span><span class="pun">.</span><span class="pln">peek</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">prev </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">List</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">List</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">List</span><span class="pun">)</span><span class="pln">prev</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> primitive </span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; consumeValue</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startArray </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">List</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONArray</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; consumeValue</span><span class="pun">(</span><span class="pln">array</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">array</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> startJSON </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startObject </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Map</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONObject</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; consumeValue</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> startObjectEntry </span><span class="pun">(</span><span class="typ">String</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valueStack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">key</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="pun">}</span></pre><p>Main logic: </p><pre class="prettyprint"><span class="pln">&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> jsonString </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="typ">Input</span><span class="pln"> JSON text</span><span class="pun">&gt;;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Transformer</span><span class="pln"> transformer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Transformer</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonString</span><span class="pun">,</span><span class="pln"> transformer</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; value </span><span class="pun">=</span><span class="pln"> transformer</span><span class="pun">.</span><span class="pln">getResult</span><span class="pun">();</span></pre><p>The result is similar to one return from the following code: </p><pre class="prettyprint"><span class="pln">&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> jsonString </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="typ">Input</span><span class="pln"> JSON text</span><span class="pun">&gt;;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Object</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">JSONParser</span><span class="pln"> parser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JSONParser</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; value </span><span class="pun">=</span><span class="pln"> parser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">jsonString</span><span class="pun">);</span></pre><h4><a name="Notes_-_Multithreading_and_extensions"></a>Notes - Multithreading and extensions<a href="http://code.google.com/p/json-simple/wiki/DecodingExamples#Notes_-_Multithreading_and_extensions" class="section_anchor">¶</a></h4><p>JSONParser is NOT thread-safe. And please note that JSON string such as <tt>[5,,,2]</tt> is accepted by the parser and is treated as <tt>[5,2]</tt>. This doesn't violate the <a href="http://www.ietf.org/rfc/rfc4627.txt" rel="nofollow">JSON specification</a>, and it increases the error toleration of the input data. Some JSON grammar checker may need a 'strict' mode. Considering adding this feature. </p><p>Since it's a bit controversial on the extension of the parser (see comments of this wiki page), I'd like to make some clarifications on this topic here. </p><p>Some users may concern about exchanging important data, say medical information or financial data, between applications. I think you need to make sure the following things in such scenarios: </p><ol><li>You need to make sure you are using a reliable and full compliant encoder on the side of the source; </li><li>Or if you also accept data from a non-trusted source, even a 'strict' decoder is inadequate. You may need extra validation rules to verify the source. For example, a user may send totally compliant <tt>[5,2]</tt> even though you expect <tt>[5,0,2]</tt>. </li></ol><p>In both cases, a liberal parser will do nothing harmful to your application. </p><p>The reason of accepting something like <tt>[5,,2]</tt> is that: </p><ol><li>A careless user or an encoder may repeat a comma (such as by pressing the key too long :-), which is harmless; </li><li>The comma is actually redundant syntactically, if two adjacent entities are recognized. </li></ol><p>I know some users may be FUD in front of a liberal parser, but as I mentioned above, it's harmless and is allowed in RFC4627 (actually the author of RFC4627 adopts this feature in the reference implementation). </p><p>Please feel free to leave a comment or post in the discussion group if you have further concerns. Thanks.  </p>
 </td> 
 </tr>
 </tbody></table>
 </div>


 
 <br>
 


 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

<div class="collapse">


 


<div id="commentlist">

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/tsaloranta/">tsaloranta</a>,
 
 </span>
 <span class="date" title="Wed Jan  7 09:09:35 2009">Jan 07, 2009</span>
 <div>
<div class="commentcontent">
<p>Actually, why wouldn't such a non-standard feature violate JSON specification? Such a construct does not conform to the JSON syntax, so by definition it seems to explicitly violate it. And the main problem is that accepting such invalid input reduces interoperability -- other parser will not accept such structures, and it may make users less likely to use json.simple, because its behavior differs from standard behavior. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Wed Jan  7 23:49:28 2009">Jan 07, 2009</span>
 <div>
<div class="commentcontent">
<p>RFC 4627 states: </p><blockquote>4. Parsers 
<blockquote>A JSON parser transforms a JSON text into another representation.  A 
JSON parser MUST accept all texts that conform to the JSON grammar. 
A JSON parser MAY accept non-JSON forms or extensions. 
</blockquote></blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Sat Jan 10 00:40:53 2009">Jan 10, 2009</span>
 <div>
<div class="commentcontent">
<p>It does not cause interoperability issues because the encoding is always right, and JSON.simple always accepts inputs that conform to the JSON grammar. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Mon Jan 12 20:53:06 2009">Jan 12, 2009</span>
 <div>
<div class="commentcontent">
<p>Actually, JSON.org's RI goes further on extension. It accepts single quote strings and hex number: : 0x20<a href="http://code.google.com/p/json-simple/w/edit/'total'">?</a>. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/tsaloranta/">tsaloranta</a>,
 
 </span>
 <span class="date" title="Mon Feb  9 15:06:40 2009">Feb 09, 2009</span>
 <div>
<div class="commentcontent">
<p>Yes, RI is non-compliant as well. It is true that specification allows for extensions; unfortunately there are no commonly defined "common" extensions and thus each parser seems to adopt their own favorite hacks. </p><p>But it is bit naive to think that accepting non-valid input would not lead to interoperability problems -- this is EXACTLY how browsers degenerated into accepting all kinds of broken html. So personally I think it is wrong to add short-cuts for what are essentially broken documents (missing values, or extra commas). </p><p>But it is your parser of course, and you can add any extensions that you like. :-) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Tue Feb 10 04:04:13 2009">Feb 10, 2009</span>
 <div>
<div class="commentcontent">
<p>Please read RFC4627 carefully, then you'll find the lines as below: </p><pre class="prettyprint"><span class="lit">5.</span><span class="pln"> </span><span class="typ">Generators</span><span class="pln"><br><br>&nbsp; &nbsp;A JSON generator produces JSON text</span><span class="pun">.</span><span class="pln"> &nbsp;</span><span class="typ">The</span><span class="pln"> resulting text MUST<br>&nbsp; &nbsp;strictly conform to the JSON grammar</span><span class="pun">.</span></pre><p>That is, the encoder should be always right, so the interoperability problem will never happen. The extension of the parser is to increase the robustness of the application. Both the RI and JSON.simple are fully compliant with RFC4627. If you insists that there will be interoperability problems, it's the problem of the specification, not the library. But the fact is, it will never happen. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/arnauldvm/">arnauldvm</a>,
 
 </span>
 <span class="date" title="Fri Mar 13 01:02:18 2009">Mar 13, 2009</span>
 <div>
<div class="commentcontent">
<p>I agree with tsaloranta. </p><p>Accepting non-compliant input creates the risk of letting non-compliant content spread (e.g. contents generated by hand, or by another system that has a flaw). As long as the only "client" to these contents is read by a "tolerant" parser you have no problem. </p><p>The day another system, using a more strict parser, comes into play, you have your interoperability problem, and it might be too late to come back. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/PeterQuinsey/">PeterQuinsey</a>,
 
 </span>
 <span class="date" title="Sun Mar 15 17:02:50 2009">Mar 15, 2009</span>
 <div>
<div class="commentcontent">
<p>arnauldvm, tsaloranta:  Please take the time to review Postel's Law: "Be conservative in what you do; be liberal in what you accept from others." </p><p><a href="http://en.wikipedia.org/wiki/Postel%27s_law" rel="nofollow">http://en.wikipedia.org/wiki/Postel%27s_law</a> </p><p>The responsibility for enforcing valid JSON lies with the encoder, not the decoder.  The decoder's sole responsibility is to parse JSON.  By gracefully accepting invalid input, the decoder becomes more robust and usable. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/keithdwinkler/">keithdwinkler</a>,
 
 </span>
 <span class="date" title="Wed Mar 18 16:33:41 2009">Mar 18, 2009</span>
 <div>
<div class="commentcontent">
<p>"Be conservative in what you do; be liberal in what you accept from others." </p><p>The complication lies in that "accepting" means making assumptions about the intention of the author. Does "5,,,2" mean "5,2", or "5,null,null,2", "5,0,0,2", or something else? </p><p>I suspect that if I were parsing, say, important medical data, I would need a strict mode, that would fail in this case, or at least warn somehow. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Wed Mar 18 20:28:51 2009">Mar 18, 2009</span>
 <div>
<div class="commentcontent">
<p>Hi keithdwinkler, if you are exchanging important data, say medical information or financial data, between applications, I think you need to make sure the following things in such scenarios: </p><ol><li>You need to make sure you are using a reliable and full compliant encoder on the side of the source; </li><li>Or if you also accept data from a non-trusted source, even a 'strict' decoder is inadequate. You may need extra validation rules to verify the source. For example, a user may send totally compliant <tt>[5,2]</tt> even though you expect <tt>[5,0,2]</tt>. </li></ol><p>In both cases, a liberal parser will do nothing harmful to your application. </p><p>The reason of accepting something like <tt>[5,,2]</tt> is that: </p><ol><li>A careless user or an encoder may repeat a comma (such as by pressing the key too long :-), which is harmless; </li><li>The comma is actually redundant syntactically, if two adjacent entities are recognized. </li></ol><p>I know some users may be FUD in front of a liberal parser, but as I mentioned above, it's harmless and is allowed in RFC4627 (actually the author of RFC4627 adopts this feature in the reference implementation). </p><p>Please feel free to leave a comment or post in the discussion group if you have further concerns. Thanks.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/eliseosoto/">eliseosoto</a>,
 
 </span>
 <span class="date" title="Tue Nov  3 16:31:09 2009">Nov 03, 2009</span>
 <div>
<div class="commentcontent">
<p>Any particular reason why JSONValue.parse(s) returns an Object and not a more proper JSONObject? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/fangyidong/">fangyidong</a>,
 
 </span>
 <span class="date" title="Tue Nov  3 19:22:15 2009">Nov 03, 2009</span>
 <div>
<div class="commentcontent">
<p>Because we also have a JSONArray and other primitives. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/@VxhfSlRWDxVMWgB6/">rheyw...@google.com</a>,
 
 </span>
 <span class="date" title="Fri Aug  6 16:25:18 2010">Aug 06, 2010</span>
 <div>
<div class="commentcontent">
<p>I have a simple, irrefutable need for a completely strict parser: I have a piece of code that produces JSON, so I need a strict parser to validate it during unit tests.  I tried to use JSONObject(), but of course JSONObject accepts invalid JSON, so my tests pass even though my program is incorrect. </p><p>Can someone recommend an easy-to-use, open-source Java library that throws an exception when it encounters invalid JSON? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/coenwulf/">coenwulf</a>,
 
 </span>
 <span class="date" title="Fri Sep 24 15:09:34 2010">Sep 24, 2010</span>
 <div>
<div class="commentcontent">
<p>To unit test the JSON output, compare it to a static string that is the expected output. If you attempt to do anything else you are doing one or more of:  </p><ol><li>Testing more than just the desired method  </li><li>Permitting bugs/features in other code to allow your test to pass when it should fail </li></ol><p></p><p>Either of those is bad. The best solution is to compare the output to the expected value, which would be a string, rather than parsing it. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 <a style="white-space: nowrap" href="http://code.google.com/u/dean.hiller/">dean.hiller</a>,
 
 </span>
 <span class="date" title="Tue Dec 14 10:34:44 2010">Dec 14, 2010</span>
 <div>
<div class="commentcontent">
<p>please PLEASE add strict mode.  The reason being is that I want to know if system A is sending input like 1,,,,5 early on so that if we have system A start sending to other systems(not just json-simple), we won't know.  it is easier to start strict and move to more flexible than it is to go from flexible to strict....heck try adding checkstyle to a 3.0 project vs. adding it to a 0.1 release project...big difference on making things stricter...it's harder to go one way then the other.   </p><blockquote>I also don't like having to write tests with the "raw" data as suggested above...that is much akin to using hibernate and writing hibernate ejbs into the db and then doing raw sql because you don't trust hibernate...hibernate should already have those tests. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

</div>
</div>

 


 <script type="text/javascript">
 function delComment(sequence_num, create_time, delete_mode) {
 var f = document.forms["delcom"];
 f.sequence_num.value = sequence_num;
 f.create_time.value = create_time;
 f.mode.value = delete_mode;
 f.submit();
 return false;
 }
 </script>


 
 
 
 
 
 <div id="commentform">
 <form action="http://code.google.com/p/json-simple/w/detail.do" method="post">
 <table>
 <tbody><tr><td class="vt">
 <input type="hidden" name="pagename" value="DecodingExamples">
 <input type="hidden" name="token" value="1c01edb64c403b5a47deb3ec33daa2c1">
 <div>Enter a comment:</div>
 <textarea name="content" rows="6" cols="80"></textarea><br><br>
 <input type="submit" name="submit" value="Submit">
 </td>
 <td class="vt">
 <div id="whb" class="tip" style="width:15em">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner closed" id="entrybubble">
 <a class="ifClosed" href="http://code.google.com/p/json-simple/wiki/DecodingExamples#whb" style="float:right" onclick="_toggleHidden(this); document.getElementById(&#39;wikihelp&#39;).value=&#39;opened&#39;">show</a>
 <a class="ifOpened" href="http://code.google.com/p/json-simple/wiki/DecodingExamples#whb" style="float:right" onclick="_toggleHidden(this); document.getElementById(&#39;wikihelp&#39;).value=&#39;closed&#39;">hide</a>
 <b>Wiki markup help</b>
 <div class="ifOpened">
 <div style="padding:2px; font-size:96%">
 =Heading1=<br>
 ==Heading2==<br>
 ===Heading3===<br>
 <br>
 *bold* &nbsp; &nbsp;
 _italic_<br>
 `inline code`<br>
 escape: `*`<br>
 <br>
 Indent lists 2 spaces:<br>
 &nbsp;&nbsp;* bullet item<br>
 &nbsp;&nbsp;# numbered list<br>
 <br>
 {{{<br>
 verbatim code block<br>
 }}}<br>
 <br>
 Horizontal rule<br>
 ----
 <br>
 <br>
 WikiWordLink<br>
 [http://domain/page&nbsp;label]<br>
 http://domain/page<br>
 <br>
 || table || cells ||<br>
 
 </div><br>
 <a href="http://code.google.com/p/support/wiki/WikiSyntax" target="new">More
 examples</a>
 <a href="http://code.google.com/p/support/wiki/WikiSyntax" target="new"><img src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/tearoff_icon.gif" width="16" height="16"></a>
 </div>
 </div>
 <div class="round1"></div>
 <div class="round2"></div>
 <div class="round4"></div>
</div>
<input type="hidden" name="wikihelp" id="wikihelp" value="closed">

 </td></tr>
 </tbody></table>
 </form>
 </div>
 
 
 

<form name="delcom" action="http://code.google.com/p/json-simple/w/delComment.do" method="POST">
 <input type="hidden" name="sequence_num" value="">
 <input type="hidden" name="create_time" value="">
 <input type="hidden" name="mode" value="">
 <input type="hidden" name="pagename" value="DecodingExamples">
 <input type="hidden" name="token" value="1c01edb64c403b5a47deb3ec33daa2c1">
</form>



 <script src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/prettify.js"></script>
 <script type="text/javascript">
 prettyPrint();
 </script>

<script type="text/javascript" src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/dit_scripts.js"></script>



  
 
 <script type="text/javascript" src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/core_scripts_20081103.js"></script>
 <script type="text/javascript" src="./DecodingExamples - json-simple - Examples of JSON decoding - Project Hosting on Google Code_files/codesite_product_dictionary_ph.pack.04102009.js"></script>
 </div>
<div id="footer" dir="ltr">
 
 <div class="text">
 
 ©2010 Google -
 <a href="http://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="http://code.google.com/p/support/">Project Hosting Help</a>
 
 </div>
</div>

 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>
 
 


 
 



<div class="menuDiv instance0" id="menuDiv-projects-dropdown" style="position: absolute; top: 19px; left: 1149px; display: none; "><div class="menuCategory controls first"><hr class="menuSeparator"><a class="menuItem" style="display: block; " href="http://code.google.com/more/">Find developer products...</a><a class="menuItem" style="display: block; " href="http://code.google.com/hosting/">Find open source projects...</a></div></div></body></html>